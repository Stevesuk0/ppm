flowchart TD
    A[开始] --> B{参数数量小于2}
    B -->|Yes| C[打印错误信息并退出]
    B -->|No| D[获取命令和参数]
    
    D --> E{命令是init}
    E -->|Yes| F[初始化配置并打印成功信息]
    
    D --> G{命令是install}
    G -->|Yes| H[获取仓库列表]
    H --> I[加载包信息]
    I --> J[遍历参数中的包名]
    J --> K[获取依赖关系]
    K --> L[打印将要安装的包]
    L --> M{用户确认继续}
    M -->|No| N[返回]
    M -->|Yes| O[下载并安装包]
    O --> P[调用dpkg安装]
    P --> Q[清理临时文件]
    Q --> R[刷新dpkg数据库]
    R --> S[解锁]

    D --> T{命令是download}
    T -->|Yes| U[处理下载选项]
    U --> V[获取仓库列表]
    V --> W[加载包信息]
    W --> X{是否包含依赖项}
    X -->|Yes| Y[下载包及其依赖项]
    X -->|No| Z[仅下载指定包]

    D --> AA{命令是search}
    AA -->|Yes| AB[获取仓库列表]
    AB --> AC[加载包信息]
    AC --> AD[搜索并打印包信息]

    D --> AE{命令是clean}
    AE -->|Yes| AF[清理缓存]
    
    D --> AG{命令是refresh}
    AG -->|Yes| AH[刷新dpkg数据库]

    D --> AI{命令是help}
    AI -->|Yes| AJ[打印帮助信息]

    D --> AK{命令是update}
    AK -->|Yes| AL[更新包列表]

    D --> AM{命令是reset}
    AM -->|Yes| AN[移除锁定]

    D --> AO{其他命令}
    AO --> AP[打印命令未找到]
